<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拥抱黎明的图书馆</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-gold: #D4AF37;
            --primary-white: #F5F5F5;
            --primary-blue: #2A5C8B;
            --primary-red: #8B0000;
            --parchment: #F8F1E5;
            --dark-parchment: #E8D9B5;
            --stone-gray: #7A7A7A;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --column-width: 1100px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Times New Roman', 'Georgia', serif;
        }

        body {
            background-color: var(--parchment);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e8d9b5' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
            color: #333;
            line-height: 1.6;
            -webkit-overflow-scrolling: touch;
        }

        /* 触摸设备专用样式 */
        .touch-device .episode-card:hover,
        .touch-device .illustration-card:hover,
        .touch-device .research-card:hover,
        .touch-device .skin-card:hover {
            transform: none; /* 触摸设备移除悬浮动画 */
        }

        .touch-device .touch-active {
            background-color: rgba(212, 175, 55, 0.1);
            transform: scale(0.98);
        }

        /* 提高触摸目标的最小高度 */
        .touch-device .sort-btn,
        .touch-device .category-tab,
        .touch-device .lang-btn {
            min-height: 36px;
        }

        /* 顶部导航栏 */
        header {
            background: linear-gradient(to right, var(--primary-white), var(--parchment));
            border-bottom: 4px solid var(--primary-gold);
            padding: 0.8rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px var(--shadow-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background-color: var(--primary-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-white);
            font-size: 24px;
            border: 3px solid var(--primary-gold);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .site-title h1 {
            font-size: 1.8rem;
            color: var(--primary-red);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            letter-spacing: 1px;
        }

        .site-title p {
            color: var(--stone-gray);
            font-style: italic;
            font-size: 0.9rem;
        }

        .language-switcher {
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            padding: 6px 12px;
            background-color: var(--primary-white);
            border: 2px solid var(--primary-gold);
            border-radius: 4px;
            color: var(--primary-blue);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            min-height: 36px;
        }

        .lang-btn:hover {
            background-color: var(--primary-gold);
            color: var(--primary-white);
        }

        .lang-btn.active {
            background-color: var(--primary-blue);
            color: var(--primary-white);
            border-color: var(--primary-blue);
        }

        .admin-info {
            text-align: right;
            font-size: 0.8rem;
            color: var(--stone-gray);
        }

        /* 主要内容区域 */
        .container {
            max-width: var(--column-width);
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* 特色展示区 */
        .featured-section {
            margin-bottom: 2.5rem;
            border: 8px double var(--primary-gold);
            border-radius: 12px;
            padding: 1.2rem;
            background-color: var(--primary-white);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 1.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-gold);
        }

        .section-icon {
            font-size: 1.6rem;
            margin-right: 10px;
            color: var(--primary-blue);
        }

        .section-title h2 {
            color: var(--primary-red);
            font-size: 1.6rem;
        }

        .featured-video {
            width: 100%;
            height: 420px;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
            position: relative;
        }

        .video-container {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
        }

        .featured-image-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .featured-image-cover:hover {
            transform: scale(1.02);
        }

        .featured-play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .video-container:hover .featured-play-overlay {
            opacity: 1;
        }

        .featured-play-overlay i {
            font-size: 4rem;
            color: var(--primary-gold);
            margin-bottom: 1rem;
        }

        .featured-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem;
            background-color: var(--dark-parchment);
            border-radius: 4px;
        }

        .featured-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .featured-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            padding: 3px 8px;
            background-color: var(--primary-red);
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        /* 各陈列区通用样式 */
        .episodes-section, .illustrations-section, .research-section, .skin-section {
            margin-bottom: 2.5rem;
            border: 2px solid var(--primary-gold);
            border-radius: 8px;
            padding: 1.2rem;
            background-color: var(--primary-white);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
        }

        .sort-buttons {
            display: flex;
            gap: 8px;
        }

        .sort-btn {
            padding: 6px 12px;
            background-color: var(--parchment);
            border: 2px solid var(--stone-gray);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            min-height: 36px;
        }

        .sort-btn:hover {
            background-color: var(--dark-parchment);
        }

        .sort-btn.active {
            background-color: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        /* 卡片网格布局 */
        .episodes-grid, .illustrations-grid, .research-grid, .skin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1.2rem;
        }

        /* 卡片通用样式 */
        .episode-card, .illustration-card, .research-card, .skin-card {
            border: 1px solid var(--dark-parchment);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: var(--parchment);
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .episode-card:hover, .illustration-card:hover, .research-card:hover, .skin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--shadow-color);
        }

        .card-thumbnail {
            height: 150px;
            background-color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            position: relative;
            overflow: hidden;
        }

        .card-cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .episode-card:hover .card-cover-image,
        .illustration-card:hover .card-cover-image,
        .research-card:hover .card-cover-image,
        .skin-card:hover .card-cover-image {
            transform: scale(1.05);
        }

        .card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .episode-card:hover .card-overlay,
        .illustration-card:hover .card-overlay,
        .research-card:hover .card-overlay,
        .skin-card:hover .card-overlay {
            opacity: 1;
        }

        .card-overlay i {
            font-size: 2rem;
            color: var(--primary-gold);
        }

        .card-content {
            padding: 0.8rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            min-height: 2.8rem;
        }

        .card-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--stone-gray);
            margin-bottom: 0.6rem;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 0.5rem;
        }

        /* 分类标签 */
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 1.2rem;
        }

        .category-tab {
            padding: 6px 12px;
            background-color: var(--parchment);
            border: 2px solid var(--stone-gray);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            min-height: 36px;
        }

        .category-tab:hover {
            background-color: var(--dark-parchment);
        }

        .category-tab.active {
            background-color: var(--primary-red);
            color: white;
            border-color: var(--primary-red);
        }

        /* 页脚 */
        footer {
            background-color: var(--stone-gray);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 2rem;
            border-top: 4px solid var(--primary-gold);
        }

        .footer-content {
            max-width: var(--column-width);
            margin: 0 auto;
        }

        .copyright {
            margin-top: 1rem;
            font-size: 0.8rem;
            color: #ddd;
        }

        /* 响应式设计 - 桌面端 */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .featured-video {
                height: 250px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .episodes-grid, .illustrations-grid, .research-grid, .skin-grid {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 12px;
                padding: 0.8rem;
            }
            
            .admin-info {
                text-align: center;
            }
        }
        
        /* 移动端专属优化 (屏幕宽度小于768px时生效) */
        @media (max-width: 768px) {
            header {
                padding: 0.8rem 1rem;
                flex-direction: column;
                gap: 0.8rem;
                position: relative;
            }

            .logo-container {
                width: 100%;
                justify-content: flex-start;
                gap: 12px;
                flex-wrap: nowrap;
                overflow: hidden;
            }

            .logo {
                width: 44px;
                height: 44px;
                font-size: 20px;
                flex-shrink: 0;
            }

            .site-title {
                flex: 1;
                min-width: 0;
            }

            .site-title h1 {
                font-size: 1.3rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .site-title p {
                font-size: 0.8rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .admin-info {
                width: 100%;
                text-align: left;
                font-size: 0.8rem;
                order: 3;
                padding-top: 0.5rem;
                border-top: 1px solid rgba(212, 175, 55, 0.3);
            }

            .language-switcher {
                position: absolute;
                top: 5.8rem;
                right: 1rem;
                z-index: 1001;
            }

            .lang-btn {
                padding: 6px 12px;
                font-size: 0.85rem;
                min-width: 60px;
            }

            /* 调整主要内容区的上边距 */
            .container {
                padding: 0.8rem;
            }
            
            /* 视频区域优化 */
            .featured-video {
                height: 200px;
            }
            
            /* 卡片网格布局优化 - 一行两列但间距更小 */
            .episodes-grid,
            .illustrations-grid,
            .research-grid,
            .skin-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.6rem;
            }
            
            /* 改善卡片触摸体验 */
            .episode-card,
            .illustration-card,
            .research-card,
            .skin-card {
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }
            
            /* 激活状态，提供更好的触摸反馈 */
            .episode-card:active,
            .illustration-card:active,
            .research-card:active,
            .skin-card:active {
                transform: scale(0.98);
            }
            
            /* 缩小卡片封面图高度 */
            .card-thumbnail {
                height: 110px;
            }
            
            /* 优化卡片内部文字 */
            .card-content {
                padding: 0.5rem;
            }
            
            .card-title {
                font-size: 0.9rem;
                min-height: 2.2rem;
                margin-bottom: 0.3rem;
                line-height: 1.3;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .card-meta {
                font-size: 0.7rem;
                margin-bottom: 0.3rem;
                flex-wrap: wrap;
            }
            
            /* 优化标签显示，移动端隐藏部分标签以避免拥挤 */
            .card-tags {
                max-height: 1.5rem;
                overflow: hidden;
            }
            
            .card-tags .tag {
                font-size: 0.6rem;
                padding: 2px 5px;
                margin: 1px;
                line-height: 1.2;
            }
            
            /* 部分卡片标签过多时可以隐藏一些 */
            .card-tags .tag:nth-child(n+3) {
                display: none;
            }
            
            /* 分类标签按钮优化 */
            .category-tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 5px;
                -webkit-overflow-scrolling: touch;
            }
            
            .category-tab {
                padding: 8px 12px;
                white-space: nowrap;
                flex-shrink: 0;
            }
            
            /* 排序按钮优化 */
            .sort-buttons {
                width: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }
            
            .sort-btn {
                padding: 8px 12px;
                flex: 1;
                text-align: center;
                min-width: 0;
            }
            
            /* 特色区域优化 */
            .featured-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .featured-title {
                font-size: 1.1rem;
            }
            
            .featured-tags {
                justify-content: flex-start;
            }
            
            /* 页脚优化 */
            footer {
                padding: 1rem;
            }
            
            footer .logo {
                width: 40px;
                height: 40px;
                margin: 0 auto 0.5rem;
            }
            
            /* 极窄屏幕的进一步优化 (宽度小于200px) */
            @media (max-width: 200px) {
                .episodes-grid,
                .illustrations-grid,
                .research-grid,
                .skin-grid {
                    grid-template-columns: 1fr;
                }
                
                .site-title h1 {
                    font-size: 1.1rem;
                }
                
                .lang-btn {
                    min-width: 50px;
                    padding: 5px 8px;
                    font-size: 0.8rem;
                }
                
                .featured-video {
                    height: 180px;
                }
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <header>
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-book"></i>
            </div>
            <div class="site-title">
                <h1 id="site-main-title">拥抱黎明的图书馆</h1>
                <p id="site-subtitle">Library of MyDawn</p>
            </div>
        </div>
        
        <div class="admin-info">
            <p id="admin-text">管理员: <strong>伊水_Uryan</strong></p>
            <p id="site-description">翁法罗斯二创作品集</p>
        </div>
        
        <div class="language-switcher">
            <button class="lang-btn active" id="lang-zh">中文</button>
            <button class="lang-btn" id="lang-en">English</button>
        </div>
    </header>
    
    <!-- 主要内容区域 -->
    <div class="container">
        <!-- 特色展示区 -->
        <section class="featured-section">
            <div class="section-title">
                <i class="fas fa-star section-icon"></i>
                <h2 id="featured-title">最新动画</h2>
            </div>
            
            <div class="featured-video">
                <div class="video-container" id="featured-video-container">
                    <!-- 视频/图片封面将动态加载 -->
                </div>
            </div>
            
            <div class="featured-info">
                <div class="featured-title" id="featured-ep-title">万敌，你为什么戴蓝宝石耳坠</div>
                <div class="featured-tags">
                    <span class="tag">永劫回归33550337</span>
                    <span class="tag">万敌的树庭留学记</span>
                    <span class="tag">（上篇）</span>
                </div>
            </div>
        </section>
        
        <!-- 动画陈列区 -->
        <section class="episodes-section">
            <div class="section-header">
                <div class="section-title">
                    <i class="fas fa-film section-icon"></i>
                    <h2 id="episodes-title">图书馆的影音库</h2>
                </div>
                <div class="sort-buttons">
                    <button class="sort-btn active" id="sort-story">按故事发展顺序</button>
                    <button class="sort-btn" id="sort-update">按更新顺序</button>
                </div>
            </div>
            
            <div class="episodes-grid" id="episodes-container">
                <!-- 动画卡片将通过JavaScript动态生成 -->
            </div>
        </section>
        
        <!-- 插画陈列区 -->
        <section class="illustrations-section">
            <div class="section-header">
                <div class="section-title">
                    <i class="fas fa-palette section-icon"></i>
                    <h2 id="illustrations-title">图书馆的藏画馆</h2>
                </div>
            </div>
            
            <div class="category-tabs">
                <button class="category-tab active" data-category="all">全部</button>
                <button class="category-tab" data-category="serious">严肃向</button>
                <button class="category-tab" data-category="meme">萌系</button>
            </div>
            
            <div class="illustrations-grid" id="illustrations-container">
                <!-- 插画卡片将通过JavaScript动态生成 -->
            </div>
        </section>
        
        <!-- 考据视频区 -->
        <section class="research-section">
            <div class="section-header">
                <div class="section-title">
                    <i class="fas fa-search section-icon"></i>
                    <h2 id="research-title">图书馆的考据室</h2>
                </div>
            </div>
            <div class="research-grid" id="research-container">
                <!-- 考据视频卡片将通过JavaScript动态生成 -->
            </div>
        </section>
        
        <!-- 输入法皮肤区 -->
        <section class="skin-section">
            <div class="section-header">
                <div class="section-title">
                    <i class="fas fa-keyboard section-icon"></i>
                    <h2 id="skin-title">图书馆的文具阁</h2>
                </div>
            </div>
            <div class="skin-grid" id="skin-container">
                <!-- 皮肤卡片将通过JavaScript动态生成 -->
            </div>
        </section>
    </div>
    
    <!-- 页脚 -->
    <footer>
        <div class="footer-content">
            <div class="logo">
                <i class="fas fa-book"></i>
            </div>
            <h3 id="footer-title">拥抱黎明的图书馆</h3>
            <p id="footer-description">翁法罗斯二创作品集 | 管理员: 伊水_Uryan</p>
            <p class="copyright" id="footer-copyright">© 2025 拥抱黎明的图书馆 | 本网站为Uryan的崩铁翁星同人收集网站</p>
        </div>
    </footer>
    
    <script>
        // ===================== 1. 重构后的核心数据 =====================
        // 1.1 所有作品的通用信息库 (不随语言改变)
        const allWorks = [
            // ===== 动画 (type: 'episode') =====
            {
                id: 1,
                type: 'episode',
                storyOrder: 1,
                updateDateISO: "2025-05-05",
                chineseLink: "https://www.bilibili.com/video/BV1EUVqzpEnh/",
                englishLink: "https://x.com/UryanKarl/status/1919328501749998045",
                bvid: "BV1EUVqzpEnh",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WhpR8OaB223v8lbh1VhTn3l-rKO4wACGB4AAi-0QVYY8g3sEYGtTzYE.jpg"
            },
            {
                id: 2,
                type: 'episode',
                storyOrder: 2,
                updateDateISO: "2025-05-12",
                chineseLink: "https://www.bilibili.com/video/BV15PEEzMEiM",
                englishLink: "https://x.com/UryanKarl/status/1921952005532102743",
                bvid: "BV15PEEzMEiM",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WZpR8Oa-uNstbiSP15qoRstmj020gACFh4AAi-0QVYjSw3G9fU_PjYE.jpg"
            },
			
                    {
                        id: 3,
						type: 'episode',
                        storyOrder: 3,
                        updateDateISO: "2025-04-28",
                        chineseLink: "https://www.bilibili.com/video/BV1SnLmzME8u/",
                        englishLink: "https://x.com/UryanKarl/status/1917085258551595023",
                        bvid: "BV1SnLmzME8u",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WppR8Oht8PvHFPp7fftO9CZtn2UwAACGh4AAi-0QVZkexUYBONdezYE.jpg"
                    },
					{
                        id: 4,
						type: 'episode',
                        storyOrder: 4,
                        updateDateISO: "2025-08-01",
                        chineseLink: "https://www.bilibili.com/video/BV1DVhJzPEE7",
                        englishLink: "https://x.com/UryanKarl/status/1977595873824760010",
                        bvid: "BV1DVhJzPEE7",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WlpR8OahbojFzHzzvcKo3VuxKEghQACGR4AAi-0QVYN0PA_1ymYIzYE.jpg"
                    },
					{
                        id: 5,
						type: 'episode',
                        storyOrder: 5,
                        updateDateISO: "2025-08-13",
                        chineseLink: "https://www.bilibili.com/video/BV1UEb8zXEdn",
                        englishLink: "https://x.com/UryanKarl/status/1977595873824760010",
                        bvid: "BV1UEb8zXEdn",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WdpR8Oai-B3UPfKPJMW1nYk65ANdAACFx4AAi-0QVabQMSwKUiDoTYE.jpg"
                    },
					{
                        id: 6,
						type: 'episode',
                        storyOrder: 6,
                        updateDateISO: "2025-10-08",
                        chineseLink: "https://www.bilibili.com/video/BV1ZCxez3ECk/",
                        englishLink: "https://x.com/UryanKarl/status/1977595873824760010",
                        bvid: "BV1ZCxez3ECk",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WtpR8Ohcwi8SpuLhHYS1ndiV5mDOgACGx4AAi-0QVaLCj4oyqpxsTYE.jpg"
                    },
                    {
                        id: 7,
						type: 'episode',
                        storyOrder: 7,
                        updateDateISO: "2025-11-05",
                        chineseLink: "https://www.bilibili.com/video/BV15N1WBTEb9",
                        englishLink: "https://x.com/UryanKarl/status/1986813834653564935",
                        bvid: "BV15N1WBTEb9",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7WVpR8OZufKgZh-kuNe_zNDt0ZiiKQACFR4AAi-0QVaNa5IObu4-izYE.jpg"
                    },
            // ===== 插画 (type: 'illustration') =====
            {
                id: 101,
                type: 'illustration',
                category: 'serious',
                updateDateISO: "2025-03-01",
                chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2bdff323b",
                englishLink: "https://x.com/UryanKarl/status/1895507738068930788",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VZpR8CCqKwe_woRbu7HSEahNTFaEAAC-h0AAi-0QVbzvmKuPwODSDYE.jpg"
            },
            {
                id: 102,
                type: 'illustration',
                category: 'serious',
                updateDateISO: "2025-03-08",
                chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be0d4341",
                englishLink: "https://x.com/UryanKarl/status/1898323112422433221",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VRpR8B6QgoBdU_3injaK83R__ZX7gAC-B0AAi-0QVZ2yie-SsMXjTYE.jpg"
            },
			
                    {
                        id: 103,
						type: 'illustration',
                        updateDateISO: "2025-03-09",
                        category: "serious",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be109a89",
                        englishLink: "https://x.com/UryanKarl/status/1898760283700809949",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7TxpR7xbjhCodd4HRxBaSyUpaQaLMgAC3h0AAi-0QValdypS1zxIyzYE.jpg"
                    },
					
					{
                        id: 104,
						type: 'illustration',
                        updateDateISO: "2025-03-10",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be115045",
                        englishLink: "https://x.com/UryanKarl/status/1898907637774713333",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VdpR8CG-HjyB1CgKseoyXPk_797GQAC-x0AAi-0QVa5-jWHJafZ_zYE.jpg"
                    },
					
					{
                        id: 105,
						type: 'illustration',
                        updateDateISO: "2025-03-12",
                        category: "serious",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be14cb90",
                        englishLink: "https://x.com/UryanKarl/status/1899805137956401311",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VVpR8B9CHkDY4rzw6qJCzG2JrO5ugAC-R0AAi-0QVaPwlMXPn685TYE.jpg"
                    },
					{
                        id: 107,
						type: 'illustration',
                        updateDateISO: "2025-5-11",
                        category: "serious",
                        tags: ["3.3前瞻观后感"],
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be809d1e",
                        englishLink: "https://x.com/UryanKarl/status/1921254055520657744",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7T5pR7yVcrPTtSDlZllsyVMvdSJHYgAC4B0AAi-0QVaS_CvmZlMTfzYE.png"
                    },
					{
                        id: 106,
						type: 'illustration',
                        updateDateISO: "2025-05-17",
                        category: "serious",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2be89a736",
                        englishLink: "https://x.com/UryanKarl/status/1923658003787677823",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7TtpR7wTpcGrNHsWEM72ZeLKQG5gcAAC2x0AAi-0QVZrAfH9W-CxsjYE.png"
                    },
					{
                        id: 108,
						type: 'illustration',
                        updateDateISO: "2025-06-02",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_2beaa03fa",
                        englishLink: "https://x.com/UryanKarl/status/1929495025567899741",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VlpR8Dhcf0lGG_IKfqkv9LzxXQd9gAC_R0AAi-0QVakUO6CYrKE-zYE.png"
                    },
					{
                        id: 109,
						type: 'illustration',
                        updateDateISO: "2025-10-21",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_34c77bd89",
                        englishLink: "https://x.com/UryanKarl/status/1980318971477012870",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VxpR8E_T-k2kA1Yad0YrabOexGPPwACAR4AAi-0QVYwWWmpTddIPDYE.jpg"
                    },
					{
                        id: 110,
						type: 'illustration',
                        updateDateISO: "2025-10-26",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_34c80936d",
                        englishLink: "https://x.com/UryanKarl/status/1982445953882992980",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VtpR8E_W-uX33V0LLJOTlXDopGLZAADHgACL7RBVjMPMq0aCSgXNgQ.jpg"
                    },
					{
                        id: 111,
						type: 'illustration',
                        updateDateISO: "2025-12-12",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_34cc98558",
                        englishLink: "https://x.com/UryanKarl/status/1999411114732573039",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7VppR8E_lY6Cn3RgqVyH4Sg-aU-a4AAC_x0AAi-0QVZ13F936An-FDYE.jpg"
                    },
                    {
                        id: 112,
						type: 'illustration',
                        updateDateISO: "2025-12-12",
                        category: "meme",
                        chineseLink: "https://karl-art.lofter.com/post/1dcc6edf_34cc91e9d",
                        englishLink: "https://x.com/UryanKarl/status/1999411906310996095",
                        coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7V1pR8E_Bd7vffgacOKpLRB977wvkgACAh4AAi-0QVaoieMc5cMn5DYE.jpg"
                    },
            // ===== 考据视频 (type: 'research') =====
            {
                id: 201,
                type: 'research',
                updateDateISO: "2025-11-24",
                chineseLink: "https://www.bilibili.com/video/BV1yFUTBjEGw/",
                englishLink: "https://x.com/UryanKarl/status/2002608869219205523",
                bvid: "BV1yFUTBjEGw",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7cNpR9v6954n_TienprGVQPwx8Us6gACnx4AAi-0QVZYolB22AR59jYE.png"
            },
            // ===== 输入法皮肤 (type: 'skin') =====
            {
                id: 301,
                type: 'skin',
                updateDateISO: "2025-07-08",
                chineseLink: "https://pan.baidu.com/s/1hLTMR5tayoz84pYU15R05g?pwd=65tx",
                englishLink: "https://x.com/UryanKarl/status/1942540406014837156",
                fileSize: "356KB",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7dVpR9zbQG5JJQaE1dtkLKrj_LTq6AACtR4AAi-0QVbXQz7HsUc9lTYE.png"
            },
            {
                id: 302,
                type: 'skin',
                updateDateISO: "2025-07-10",
                chineseLink: "https://pan.baidu.com/s/1oPHCVUrNGlFv8nZfoeIGHw?pwd=mdms",
                englishLink: "https://x.com/UryanKarl/status/1943192888273440779",
                fileSize: "293KB",
                coverImage: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEN7dRpR9zYNXBDkpbpzXovSZ2CTgAB9NUAArQeAAIvtEFWV6RPG4_SR1Y2BA.png"
            }
        ];

        // 1.2 翻译映射表 (按语言和作品ID存储标题和标签)
        const translations = {
            'zh': {
                // 动画标题和标签
                1: { title: "万敌，我要去当祭品了", tags: ["别跟万敌开玩笑"] },
                2: { title: "万敌，你听说过走马灯吗？", tags: ["泡澡"] },
                3: { title: "万敌和白厄连挚友都算不上", tags: ["采访","相性一百问（划掉)"] },
                4: { title: "“喂喂，救世主，能看到吗？”", tags: ["视频通话", "论监控摄像头的妙用", "3.3万敌剧情补充"] },
                5: { title: "白厄和万敌算哪门子宿敌啊", tags: ["吃播", "微量夏雅"] },
                6: { title: "哥们！？你是在跟我开玩笑吗！？", tags: ["别跟万敌开玩笑", "白厄能怀孕（确信）"] },
                7: { title: "万敌，你为什么戴着蓝宝石耳坠？", tags: ["永劫回归33550337", "万敌的树庭留学记", "（上篇）"] },
                // 插画标题和标签
                101: { title: "“祝你战无不胜，迈德漠斯”", tags: ["3.1玩后感"] },
                102: { title: "纯蓝", tags: ["原曲是COP的《纯蓝》"] },
                // 考据视频标题和标签
                201: { title: "米哈游如何用三种羊隐喻白厄", tags: ["羊塑", "考据"] },
                // 皮肤标题和标签
                301: { title: "麦田中的比格椰 搜狗皮肤", tags: ["仅限PC端", "动态特效"] },
                302: { title: "蜜果羹的移动堡垒 搜狗皮肤", tags: ["仅限PC端", "动态特效"] },
            },
            'en': {
                // Animation
                1: { title: "'Sacrificial Offering'", tags: ["Don't joke to Mydei"] },
                2: { title: "Have you ever heard of a Revolving Lantern?", tags: ["Bathing together"] },
                3: { title: "Are you 2 not friends?", tags: ["Interview"] },
                4: { title: "'Deliverer, can you see me?'", tags: ["How to use CCTV", "to leave video messages to your wife"] },
                5: { title: "Bros are just keep eating honey cakes", tags: ["ASMR(what)", "(a little bit Anagleae)"] },
                6: { title: "Bro are you joking!?", tags: ["that's not a joke","Mpreg(sort of)"] },
                7: { title: "Mydei, why are you wearing that sapphire earing?", tags: ["cycle#33550337", "Mydei in the Grove", "1/3"] },
                // Illustrations
                101: { title: "“May You Be Ever Victorious, Mademus”", tags: ["After 3.1 Story"] },
                102: { title: "Pure Blue", tags: ["Original song: COP - Pure Blue"] },
                // Research Videos
                201: { title: "How hyv use Goat, Oryx and Sheep to metaphorize Phainon", tags: ["metaphor", "research"] },
                // Skins
                301: { title: "Beagle Coconut", tags: ["Sogou Pinin Input Skin","PC only"] },
                302: { title: "Fig Stew", tags: ["Sogou Pinin Input Skin","PC only"] },
            }
        };

        // 1.3 网站界面文本翻译
        const websiteText = {
            'zh': {
                siteTitle: "拥抱黎明的图书馆",
                siteSubtitle: "Library of MyDawn",
                adminText: "管理员: ",
                siteDescription: "翁法罗斯二创作品集",
                footerTitle: "拥抱黎明的图书馆",
                footerDescription: "翁法罗斯二创作品集 | 管理员: 伊水_Uryan",
                footerCopyright: "© 2025 拥抱黎明的图书馆 | 本网站为Uryan的崩铁翁星同人收集网站",
                featuredTitle: "最新动画",
                episodesTitle: "图书馆的影音库",
                illustrationsTitle: "图书馆的藏画馆",
                researchTitle: "图书馆的考据室",
                skinTitle: "图书馆的文具阁",
                sortStory: "按故事发展顺序",
                sortUpdate: "按最近更新",
                categoryAll: "全部",
                categorySerious: "严肃向",
                categoryMeme: "萌系"
            },
            'en': {
                siteTitle: "Library of MyDawn",
                siteSubtitle: "拥抱黎明的图书馆",
                adminText: "Admin: ",
                siteDescription: "Amphoreus FanWork",
                footerTitle: "Library of MyDawn",
                footerDescription: "Amphoreus FanWork Site | Admin: 伊水_Uryan",
                footerCopyright: "© 2025 Library of MyDawn | This site showcases Uryan's HSR Mydei/Phainon fanworks",
                featuredTitle: "Latest Animation",
                episodesTitle: "Library's Video Archive",
                illustrationsTitle: "Library's Art Gallery",
                researchTitle: "Library's Research Room",
                skinTitle: "Library's Stationery",
                sortStory: "By Story Order",
                sortUpdate: "By Latest Update",
                categoryAll: "All",
                categorySerious: "Serious Art",
                categoryMeme: "Meme"
            }
        };

        // ===================== 2. 全局状态与工具函数 =====================
        let currentLanguage = 'zh';
        let currentSort = 'story';
        let currentCategory = 'all';

        // 工具函数：根据作品类型、语言、排序方式获取最终作品列表
        function getWorksByType(workType, lang) {
            // 1. 从allWorks中筛选出指定类型的作品
            let works = allWorks.filter(work => work.type === workType);
            
            if (works.length === 0) return [];

            // 2. 为每个作品合并对应语言的翻译和格式化日期
            works = works.map(work => {
                const translated = translations[lang] ? translations[lang][work.id] || {} : {};
                return {
                    ...work, // 保留所有通用信息
                    title: translated.title || `[${lang.toUpperCase()} Title Needed]`,
                    tags: translated.tags || [],
                    // 格式化日期显示
                    updateDate: formatDisplayDate(work.updateDateISO, lang)
                };
            });

            // 3. 排序逻辑
            if (workType === 'episode') {
                if (currentSort === 'story') {
                    works.sort((a, b) => a.storyOrder - b.storyOrder);
                } else {
                    // 按更新日期倒序
                    works.sort((a, b) => new Date(b.updateDateISO) - new Date(a.updateDateISO));
                }
            } else {
                // 其他类型默认按更新日期倒序
                works.sort((a, b) => new Date(b.updateDateISO) - new Date(a.updateDateISO));
            }

            return works;
        }

        // 工具函数：格式化日期显示
        function formatDisplayDate(isoString, lang) {
            if (!isoString) return '';
            try {
                const date = new Date(isoString);
                if (lang === 'zh') {
                    return `${date.getFullYear()}年${date.getMonth()+1}月${date.getDate()}日`;
                } else {
                    return date.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric' 
                    });
                }
            } catch (e) {
                return isoString;
            }
        }

        // ===================== 3. 核心渲染函数 =====================
        // 通用函数：渲染任何一种作品类型的卡片
        function renderWorks(workType, containerId, lang) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error(`容器 #${containerId} 不存在`);
                return;
            }

            container.innerHTML = '';
            const works = getWorksByType(workType, lang);

            // 特殊处理：如果是插画，需要根据当前分类筛选
            let displayWorks = works;
            if (workType === 'illustration' && currentCategory !== 'all') {
                displayWorks = works.filter(work => work.category === currentCategory);
            }

            if (displayWorks.length === 0) {
                const emptyMsg = document.createElement('div');
                emptyMsg.style.textAlign = 'center';
                emptyMsg.style.padding = '2rem';
                emptyMsg.style.color = 'var(--stone-gray)';
                emptyMsg.innerHTML = `<i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                      <p>${lang === 'zh' ? '当前没有作品' : 'No works yet'}</p>`;
                container.appendChild(emptyMsg);
                return;
            }

            displayWorks.forEach(work => {
                const card = document.createElement('div');
                card.className = `${workType}-card`;
                card.style.cursor = 'pointer';

                // 根据当前语言决定点击后跳转的链接
                const targetLink = lang === 'zh' ? work.chineseLink : work.englishLink;
                card.onclick = () => {
                    if (targetLink && targetLink !== '#' && targetLink !== 'https://example.com') {
                        window.open(targetLink, '_blank');
                    }
                };

                // 根据作品类型决定卡片上显示的小图标和角标文字
                let typeIcon = 'fa-file';
                let badgeText = '';
                let bgGradient = 'linear-gradient(45deg, #2A5C8B, #1a3a5f)';
                
                if (work.type === 'episode') {
                    typeIcon = work.id === 1 ? 'fa-play' : 'fa-film';
                    badgeText = lang === 'zh' ? `第${work.id}集` : `Episode ${work.id}`;
                    bgGradient = 'linear-gradient(45deg, #2A5C8B, #1a3a5f)';
                } else if (work.type === 'illustration') {
                    typeIcon = work.category === 'serious' ? 'fa-paint-brush' : 'fa-laugh';
                    badgeText = lang === 'zh' ? 
                        (work.category === 'serious' ? '严肃向' : '萌系') : 
                        (work.category === 'serious' ? 'Serious' : 'Meme');
                    bgGradient = work.category === 'serious' ? 
                        'linear-gradient(45deg, #8B0000, #5a0000)' : 
                        'linear-gradient(45deg, #D4AF37, #b8941f)';
                } else if (work.type === 'research') {
                    typeIcon = 'fa-search';
                    badgeText = lang === 'zh' ? '考据' : 'Research';
                    bgGradient = 'linear-gradient(45deg, #228B22, #1a6b1a)';
                } else if (work.type === 'skin') {
                    typeIcon = 'fa-keyboard';
                    badgeText = lang === 'zh' ? '皮肤' : 'Skin';
                    bgGradient = 'linear-gradient(45deg, #8A2BE2, #6a1fc2)';
                }

                // 构建卡片的HTML内容
                card.innerHTML = `
                    <div class="card-thumbnail" style="background: ${bgGradient};">
                        <img src="${work.coverImage}" alt="${work.title}" class="card-cover-image" 
                             onerror="this.style.display='none'; this.parentNode.innerHTML='<i class=\\'fas ${typeIcon}\\' style=\\'font-size: 3rem;\\'></i>';">
                        <div class="card-overlay">
                            <i class="fas ${typeIcon}"></i>
                        </div>
                        <div style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.7); color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">
                            ${badgeText}
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${work.title}</h3>
                        <div class="card-meta">
                            <span>${lang === 'zh' ? '更新: ' : 'Updated: '}${work.updateDate}</span>
                            ${work.fileSize ? `<span>${work.fileSize}</span>` : ''}
                        </div>
                        <div class="card-tags">
                            ${work.tags.map(tag => 
                                `<span class="tag" style="font-size: 0.7rem; padding: 2px 6px; margin: 2px;">${tag}</span>`
                            ).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ===================== 4. 页面各区块的渲染函数 =====================
        // 渲染动画
        function renderEpisodes() {
            renderWorks('episode', 'episodes-container', currentLanguage);
        }

        // 渲染插画
        function renderIllustrations() {
            renderWorks('illustration', 'illustrations-container', currentLanguage);
        }

        // 渲染考据视频
        function renderResearch() {
            renderWorks('research', 'research-container', currentLanguage);
        }

        // 渲染皮肤
        function renderSkins() {
            renderWorks('skin', 'skin-container', currentLanguage);
        }

        // 加载并设置置顶内容（自动抓取最新作品信息）
        function loadFeaturedContent() {
            const container = document.getElementById('featured-video-container');
            const titleElement = document.getElementById('featured-ep-title');
            const tagsContainer = document.querySelector('.featured-tags'); // 获取标签容器

            if (!container || !titleElement || !tagsContainer) {
                console.error('置顶区域的关键元素不存在');
                return;
            }

            // 1. 获取所有动画，并按日期倒序排序（最新的在最前面）
            const episodes = allWorks
                .filter(work => work.type === 'episode')
                .sort((a, b) => new Date(b.updateDateISO) - new Date(a.updateDateISO));

            if (episodes.length === 0) {
                // 如果没有动画作品，显示占位信息
                container.innerHTML = `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#1a1a2e;color:white;flex-direction:column;">
                    <i class="fas fa-video-slash" style="font-size:3rem; margin-bottom:1rem;"></i>
                    <p>${currentLanguage === 'zh' ? '暂无动画作品' : 'No animation available'}</p>
                </div>`;
                titleElement.textContent = currentLanguage === 'zh' ? '暂无最新动画' : 'No Latest Animation';
                tagsContainer.innerHTML = ''; // 清空标签
                return;
            }

            const latestEpisode = episodes[0]; // 这就是最新一集
            const link = currentLanguage === 'zh' ? latestEpisode.chineseLink : latestEpisode.englishLink;

            // 2. 动态抓取当前语言下的标题和标签
            const currentTranslations = translations[currentLanguage] || {};
            const episodeTranslation = currentTranslations[latestEpisode.id] || {};
            
            const latestTitle = episodeTranslation.title || `[${currentLanguage.toUpperCase()} Title Needed]`;
            const latestTags = episodeTranslation.tags || [];

            // 3. 更新置顶区域的标题
            titleElement.textContent = latestTitle;

            // 4. 动态生成并更新标签
            tagsContainer.innerHTML = ''; // 先清空现有标签
            latestTags.forEach(tagText => {
                const tagSpan = document.createElement('span');
                tagSpan.className = 'tag';
                tagSpan.textContent = tagText;
                tagsContainer.appendChild(tagSpan);
            });

            // 5. 更新视频播放器或封面链接
            if (currentLanguage === 'zh' && latestEpisode.bvid) {
                // 中文环境：B站嵌入式播放器
                container.innerHTML = `
                    <iframe 
                        src="https://player.bilibili.com/player.html?bvid=${latestEpisode.bvid}&high_quality=1&autoplay=0" 
                        width="100%" height="100%" frameborder="0" allowfullscreen
                        scrolling="no" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups">
                    </iframe>`;
            } else {
                // 英文或其他环境：显示封面图，点击跳转
                container.innerHTML = `
                    <a href="${link}" target="_blank" style="display: block; width: 100%; height: 100%;">
                        <img src="${latestEpisode.coverImage}" alt="${latestTitle}" class="featured-image-cover" 
                             onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML='<div style=\"width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#1a1a2e;color:white;\"><i class=\"fas fa-play-circle\" style=\"font-size:4rem;\"></i></div>';">
                        <div class="featured-play-overlay">
                            <i class="fas fa-play-circle"></i>
                            <p>${currentLanguage === 'zh' ? '点击观看' : 'Click to watch'}</p>
                        </div>
                    </a>`;
            }
        }

        // 渲染所有内容（主控制函数）
        function renderContent() {
            const text = websiteText[currentLanguage];

            // 更新所有界面文字
            document.getElementById('site-main-title').textContent = text.siteTitle;
            document.getElementById('site-subtitle').textContent = text.siteSubtitle;
            document.getElementById('admin-text').innerHTML = `<strong>${text.adminText}</strong>伊水_Uryan`;
            document.getElementById('site-description').textContent = text.siteDescription;
            document.getElementById('footer-title').textContent = text.footerTitle;
            document.getElementById('footer-description').textContent = text.footerDescription;
            document.getElementById('footer-copyright').textContent = text.footerCopyright;
            document.getElementById('featured-title').textContent = text.featuredTitle;
            document.getElementById('episodes-title').textContent = text.episodesTitle;
            document.getElementById('illustrations-title').textContent = text.illustrationsTitle;
            document.getElementById('research-title').textContent = text.researchTitle;
            document.getElementById('skin-title').textContent = text.skinTitle;
            document.getElementById('sort-story').textContent = text.sortStory;
            document.getElementById('sort-update').textContent = text.sortUpdate;

            // 更新分类标签文字
            document.querySelectorAll('.category-tab').forEach((tab, idx) => {
                if (idx === 0) tab.textContent = text.categoryAll;
                else if (idx === 1) tab.textContent = text.categorySerious;
                else if (idx === 2) tab.textContent = text.categoryMeme;
            });

            // 渲染所有作品区块
            renderEpisodes();
            renderIllustrations();
            renderResearch();
            renderSkins();
            loadFeaturedContent();
        }

        // ===================== 5. 初始化与事件绑定 =====================
        document.addEventListener('DOMContentLoaded', function() {
            // ===================== 6. 触摸设备优化 =====================
            // 检测是否为触摸设备
            function isTouchDevice() {
                return 'ontouchstart' in window || 
                       navigator.maxTouchPoints > 0 || 
                       navigator.msMaxTouchPoints > 0;
            }

            // 如果检测到触摸设备，添加相关优化类
            if (isTouchDevice()) {
                document.body.classList.add('touch-device');
                
                // 修改卡片悬停效果，使触摸设备上也有视觉反馈
                document.querySelectorAll('.episode-card, .illustration-card, .research-card, .skin-card').forEach(card => {
                    card.addEventListener('touchstart', function() {
                        this.classList.add('touch-active');
                    });
                    
                    card.addEventListener('touchend', function() {
                        setTimeout(() => {
                            this.classList.remove('touch-active');
                        }, 200);
                    });
                    
                    card.addEventListener('touchcancel', function() {
                        this.classList.remove('touch-active');
                    });
                });
            }

            // 语言切换
            document.getElementById('lang-zh').addEventListener('click', () => {
                if (currentLanguage !== 'zh') {
                    currentLanguage = 'zh';
                    document.getElementById('lang-zh').classList.add('active');
                    document.getElementById('lang-en').classList.remove('active');
                    renderContent();
                }
            });
            
            document.getElementById('lang-en').addEventListener('click', () => {
                if (currentLanguage !== 'en') {
                    currentLanguage = 'en';
                    document.getElementById('lang-en').classList.add('active');
                    document.getElementById('lang-zh').classList.remove('active');
                    renderContent();
                }
            });

            // 动画排序切换
            document.getElementById('sort-story').addEventListener('click', () => {
                if (currentSort !== 'story') {
                    currentSort = 'story';
                    document.getElementById('sort-story').classList.add('active');
                    document.getElementById('sort-update').classList.remove('active');
                    renderEpisodes();
                }
            });
            
            document.getElementById('sort-update').addEventListener('click', () => {
                if (currentSort !== 'update') {
                    currentSort = 'update';
                    document.getElementById('sort-update').classList.add('active');
                    document.getElementById('sort-story').classList.remove('active');
                    renderEpisodes();
                }
            });

            // 插画分类切换
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentCategory = tab.getAttribute('data-category');
                    renderIllustrations();
                });
            });

            // 初始渲染
            renderContent();
            
            // 确保所有卡片都能正常显示
            setTimeout(() => {
                renderEpisodes();
                renderIllustrations();
                renderResearch();
                renderSkins();
            }, 100);
        });
    </script>
</body>
</html>
